# Production configuration for Cloud Run deployment

# Server configuration
server.port=${PORT:8080}

# Database configuration for production
# Use PostgreSQL in production for better performance and reliability
spring.datasource.url=${LLM_DB_URL:jdbc:postgresql://localhost:5432/localslocalmarket}
spring.datasource.driver-class-name=${LLM_DB_DRIVER:org.postgresql.Driver}
spring.datasource.username=${LLM_DB_USER:postgres}
spring.datasource.password=${LLM_DB_PASS:}
spring.jpa.database-platform=${LLM_DB_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.hibernate.ddl-auto=${LLM_JPA_DDL:validate}

# JPA configuration
spring.jpa.open-in-view=false
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Security configuration
llm.jwt.secret=${LLM_JWT_SECRET}
llm.jwt.ttl-minutes=${LLM_JWT_TTL_MINUTES:1440}

# File uploads configuration
llm.uploads.dir=${LLM_UPLOADS_DIR:/tmp/uploads}
llm.uploads.image.format=${LLM_UPLOADS_IMAGE_FORMAT:webp}
llm.uploads.image.quality=${LLM_UPLOADS_IMAGE_QUALITY:0.85}
llm.uploads.webp.lossless=${LLM_UPLOADS_WEBP_LOSSLESS:false}

# File upload limits
spring.servlet.multipart.max-file-size=2MB
spring.servlet.multipart.max-request-size=10MB

# Logging configuration
logging.level.root=WARN
logging.level.org.springframework.security=INFO
logging.level.org.localslocalmarket=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Caching configuration
llm.cache.enabled=${LLM_CACHE_ENABLED:true}
llm.cache.ttl-seconds=${LLM_CACHE_TTL_SECONDS:300}
llm.cache.max-size=${LLM_CACHE_MAX_SIZE:500}

# Actuator endpoints for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.db.enabled=true

# Performance optimizations
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# CORS configuration for production domains
llm.cors.allowed-origins=https://www.localslocalmarket.com,https://localslocalmarket.com
