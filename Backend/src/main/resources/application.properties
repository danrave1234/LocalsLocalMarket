spring.application.name=LocalsLocalMarket

# --- Server ---
# Bind to the PORT provided by the platform (e.g., Cloud Run/App Engine), default to 8080 locally.
server.port=${PORT:8080}

# --- Database (env-driven with SQLite defaults) ---
# Use SQLite by default. To switch to Postgres, set the env variables accordingly.
spring.datasource.url=${LLM_DB_URL:jdbc:sqlite:llm.db}
spring.datasource.driver-class-name=${LLM_DB_DRIVER:org.sqlite.JDBC}
spring.jpa.hibernate.ddl-auto=${LLM_JPA_DDL:update}
spring.jpa.database-platform=${LLM_DB_DIALECT:org.hibernate.community.dialect.SQLiteDialect}
# Optional for Postgres/MySQL
spring.datasource.username=${LLM_DB_USER:}
spring.datasource.password=${LLM_DB_PASS:}

spring.jpa.open-in-view=false

# --- Security ---
llm.jwt.secret=${LLM_JWT_SECRET:change-this-secret-in-prod-please-32b-min}
llm.jwt.ttl-minutes=${LLM_JWT_TTL_MINUTES:1440}

# --- Static uploads ---
llm.uploads.dir=${LLM_UPLOADS_DIR:uploads}
# Image processing options
llm.uploads.image.format=${LLM_UPLOADS_IMAGE_FORMAT:webp}
llm.uploads.image.quality=${LLM_UPLOADS_IMAGE_QUALITY:0.95}
llm.uploads.webp.lossless=${LLM_UPLOADS_WEBP_LOSSLESS:false}

spring.servlet.multipart.max-file-size=2MB
spring.servlet.multipart.max-request-size=10MB

# --- Logging ---
logging.level.org.springframework.security=${LLM_LOG_SECURITY:INFO}

# --- Caching ---
llm.cache.enabled=${LLM_CACHE_ENABLED:true}
llm.cache.ttl-seconds=${LLM_CACHE_TTL_SECONDS:600}
llm.cache.max-size=${LLM_CACHE_MAX_SIZE:1000}
